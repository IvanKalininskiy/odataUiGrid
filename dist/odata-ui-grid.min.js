var OdataUiGrid;!function(r){"use strict";var e=function(){function r(){}return r.main=angular.module("odata.ui.grid",["ODataResources","ui.grid","ui.grid.pagination"]),r}();r.Modules=e,e.main.run(["$templateCache",function(r){var e=r.get("ui-grid/uiGridHeaderCell").toString();e=e.replace(/ui\-grid\-filter/gi,"odata-ui-grid-filter"),r.put("ui-grid/uiGridHeaderCell",e)}])}(OdataUiGrid||(OdataUiGrid={}));var OdataUiGrid;!function(r){var e;!function(e){"use strict";var i=function(){function r(r,e,i,t,n,a){this.priority=-200,this.restrict="A",this.scope=!1,this.require="uiGrid",this.filterTermMappings={},this.paginationOptions={page:1,paginationPageSizes:[25,50,75],paginationPageSize:25,sort:""};var o=this;this.link=function(r,i,u,c){function s(){o.filterTermMappings[a.filter.STARTS_WITH]="startswith",o.filterTermMappings[a.filter.ENDS_WITH]="endswith",o.filterTermMappings[a.filter.EXACT]="eq",o.filterTermMappings[a.filter.CONTAINS]="contains",o.filterTermMappings[a.filter.GREATER_THAN]="gt",o.filterTermMappings[a.filter.GREATER_THAN_OR_EQUAL]="ge",o.filterTermMappings[a.filter.LESS_THAN]="lt",o.filterTermMappings[a.filter.LESS_THAN_OR_EQUAL]="le"}function d(){var e=r[u.odataUiGridQueryOptions],i=r[u.uiGrid];if(i){i.useExternalPagination=!0,i.useExternalFiltering=!0,i.useExternalSorting=!0;var t=i.onRegisterApi;i.onRegisterApi=function(n){t&&t(n),e.$currentQuery={gridApi:n,provider:e.resource.odata(),predicate:e.predicate,expand:e.expand,select:e.select,skip:e.skip,take:e.take,sort:e.sort,sortDirection:e.sortDirection},n.core.on.sortChanged(r,function(r,i){angular.noop(r),l(e)}),n.core.on.filterChanged(r,function(){l(e)}),n.pagination&&(i.currentPage=i.currentPage||o.paginationOptions.page,i.paginationPageSize=o.paginationOptions.paginationPageSize,i.paginationPageSizes=o.paginationOptions.paginationPageSizes,n.pagination.on.paginationChanged(r,function(r,t){i.currentPage=r,i.paginationPageSize=t,l(e)})),l(e)}}}function p(r){var i=r.$currentQuery.gridApi,t=i.grid.options;if(r.$currentQuery.skip=(t.currentPage-1)*t.paginationPageSize,r.$currentQuery.take=t.paginationPageSize,i&&t){var n=function(r){e(function(){void 0!==r&&void 0!==r.count&&(t.totalItems=r.count,i.grid.appScope[t.data]=r)})},a=function(){angular.noop()};y(r,o.filterTermMappings,n,a)}}function l(r){f(r),g(r),p(r)}function f(r,e){if(!r||!r.resource)throw new Error("Need a valid odataUiGridQueryOptions object with a valid resource.");var i={gridApi:e||r.$currentQuery.gridApi,provider:r.resource.odata(),predicate:r.predicate,expand:r.expand,select:r.select,skip:r.skip,take:r.take,sort:r.sort,sortDirection:r.sortDirection};r.$currentQuery=i}function g(r){var e=r.$currentQuery.gridApi.grid.columns.filter(function(r){return Object.keys(r.sort).length});e.sort(function(r,e){return r.sort.priority===e.sort.priority?0:r.sort.priority>e.sort.priority?1:-1}).some(function(e,i){return r.$currentQuery.sort=e.field,r.$currentQuery.sortDirection=e.sort.direction,!0})}function $(r,e,i,n){if(-1!==["startswith","endswith"].indexOf(e))r.$currentQuery.provider=r.$currentQuery.provider.filter(new t.Func(e,new t.Property(i),new t.Value(n)),!0);else if("contains"===e)r.$currentQuery.provider=r.$currentQuery.provider.isv4?r.$currentQuery.provider.filter(new t.Func("contains",new t.Property(i),new t.Value(n))):r.$currentQuery.provider.filter(new t.Func("substringof",new t.Value(n),new t.Property(i)));else{n=isNaN(n)?n:parseInt(n,10);var a=new t.Predicate(i,e,n);r.$currentQuery.predicate=r.$currentQuery.predicate?r.$currentQuery.predicate.and(a):a}}function y(r,e,i,t){var n=function(r){return void 0!==r.term&&null!==r.term&&""!==r.term.toString().trim()},a=r.$currentQuery.gridApi.grid;a.columns.filter(function(r){var e=!1;return a&&a.options&&a.options.enableFiltering&&(e=r&&r.filters&&r.filters.length&&r.filters.some(n)),e}).forEach(function(i){i.filters&&i.filters.forEach(function(t){t&&void 0!==e[t.condition]&&n(t)&&$(r,e[t.condition],i.field,t.term)})});var o=r.$currentQuery.provider;return r.$currentQuery.predicate&&(o=o.filter(r.$currentQuery.predicate)),r.$currentQuery.select&&(o=o.select(r.$currentQuery.select)),r.$currentQuery.expand&&r.$currentQuery.expand.length&&r.$currentQuery.expand.forEach(function(r){o=o.expand(r)}),r.$currentQuery.skip&&(o=o.skip(r.$currentQuery.skip)),r.$currentQuery.take&&(o=o.take(r.$currentQuery.take)),r.$currentQuery.sort&&(o=o.orderBy(r.$currentQuery.sort,r.$currentQuery.sortDirection)),r.$currentQuery.provider=o,o.withInlineCount().query(i,t)}angular.noop(r,i,u,n),s(),d()}}return r.$inject=["$compile","$timeout","$q","$odata","$odataresource","uiGridConstants"],r}();e.OdataUiGrid=i,r.Modules.main.directive("odataUiGrid",["$compile","$timeout","$q","$odata","$odataresource","uiGridConstants",function(r,e,t,n,a,o){return new i(r,e,t,n,a,o)}])}(e=r.Base||(r.Base={}))}(OdataUiGrid||(OdataUiGrid={}));var OdataUiGrid;!function(r){var e;!function(e){"use strict";var i=function(){function r(e,i,t){this.restrict="AE",this.scope=!1,this.compile=function(){return{pre:function(t,n,a){function o(){var e=!1;return t.col&&t.col.filters&&(e=t.col.filters.some(function(e){return-1!==r.customFiltersProvided.indexOf(e.type)})),e}angular.noop(a);var u=t.col.grid.options&&t.col.grid.options.useExternalFiltering&&o()?i.get("lib/directives/odataUiGridFilterView.html"):"<div ui-grid-filter></ui-grid-filter>";n.html(""),n.append(e(angular.element(u))(t))},post:function(r,e,i){angular.noop(e,i),r.col&&r.col.grid}}}}return r.customFiltersProvided=["date"],r.$inject=["$compile","$templateCache","uiGridConstants"],r}();e.OdataUiGridFilter=i,r.Modules.main.directive("odataUiGridFilter",["$compile","$templateCache","uiGridConstants",function(r,e,t){return new i(r,e,t)}])}(e=r.Base||(r.Base={}))}(OdataUiGrid||(OdataUiGrid={}));