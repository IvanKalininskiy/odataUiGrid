var OdataUiGrid;!function(i){"use strict";var r=function(){function i(){}return i.main=angular.module("odata.ui.grid",["ODataResources","ui.grid","ui.grid.pagination"]),i}();i.Modules=r,r.main.run(["$templateCache",function(i){var r=i.get("ui-grid/uiGridHeaderCell").toString();r=r.replace(/ui\-grid\-filter/gi,"odata-ui-grid-filter"),i.put("ui-grid/uiGridHeaderCell",r)}])}(OdataUiGrid||(OdataUiGrid={}));var OdataUiGrid;!function(i){var r;!function(r){"use strict";var t=function(){function i(i,r,t,e,n,a){var o=this;this.priority=-200,this.restrict="A",this.scope=!1,this.require="uiGrid",this.filterTermMappings={},this.paginationOptions={page:1,paginationPageSizes:[25,50,75],paginationPageSize:25,sort:""};var d=this;this.link=function(i,t,n,s){function u(){var i=s.grid&&s.grid.api,r=i&&i.grid.appScope[n.odataUiGridQueryOptions];r.predicate&&(d.originalPredicate=r.predicate),d.currentQuery=r,c()}function p(){d.filterTermMappings[a.filter.STARTS_WITH]="startswith",d.filterTermMappings[a.filter.ENDS_WITH]="endswith",d.filterTermMappings[a.filter.EXACT]="eq",d.filterTermMappings[a.filter.CONTAINS]="contains",d.filterTermMappings[a.filter.GREATER_THAN]="gt",d.filterTermMappings[a.filter.GREATER_THAN_OR_EQUAL]="ge",d.filterTermMappings[a.filter.LESS_THAN]="lt",d.filterTermMappings[a.filter.LESS_THAN_OR_EQUAL]="le"}function c(){if(!d.currentQuery||!d.currentQuery.resource)throw new Error("Need a valid odataUiGridQueryOptions object with a valid resource.");d.currentQuery.provider=d.currentQuery.resource.odata(),d.currentQuery.predicate=d.originalPredicate,void 0!==n.odataUiGridUseV4&&(d.currentQuery.provider.isv4=!0)}function l(i,r){i.sort=void 0,i.sortDirection=void 0,r.sort(function(i,r){return i.sort.priority===r.sort.priority?0:i.sort.priority>r.sort.priority?1:-1}).some(function(r,t){return i.provider=i.resource.odata(),i.sort=r.field,i.sortDirection=r.sort.direction,!0})}function g(i,r,t,n){if(-1!==["startswith","endswith"].indexOf(r))i.provider=i.provider.filter(new e.Func(r,new e.Property(t),new e.Value(n)),!0);else if("contains"===r)i.provider=i.provider.isv4?i.provider.filter(new e.Func("contains",new e.Property(t),new e.Value(n))):i.provider.filter(new e.Func("substringof",new e.Value(n),new e.Property(t)));else{n=isNaN(n)?n:parseInt(n,10);var a=new e.Predicate(t,r,n);i.predicate=i.predicate?i.predicate.and(a):a}}function f(i,r,t,e,n){var a=function(i){return void 0!==i.term&&null!==i.term&&""!==i.term.toString().trim()};i.columns.filter(function(i){return i.enableFiltering&&i.filters.length&&i.filters.some(a)}).forEach(function(i){i.filters.forEach(function(e){void 0!==r[e.condition]&&a(e)&&g(t,r[e.condition],i.field,e.term)})});var o=t.provider;return t.predicate&&(o=o.filter(t.predicate)),t.select&&(o=o.select(t.select)),t.expand&&t.expand.length&&t.expand.forEach(function(i){o=o.expand(i)}),t.skip&&(o=o.skip(t.skip)),t.take&&(o=o.take(t.take)),t.sort&&(o=o.orderBy(t.sort,t.sortDirection)),o.withInlineCount().query(e,n)}angular.noop(i,t,n),o.initializeGrid=function(){var r=s.grid&&s.grid.options,t=s.grid&&s.grid.api;r&&(r.useExternalPagination=!0,r.useExternalFiltering=!0,r.useExternalSorting=!0),t&&(t.core.on.sortChanged(i,function(i,r){angular.noop(i,r),l(o.currentQuery,r),o.refresh()}),t.core.on.filterChanged(i,function(){o.refresh()}),t.pagination&&(r.paginationPageSize=o.paginationOptions.paginationPageSize,r.paginationPageSizes=o.paginationOptions.paginationPageSize,r.page=o.paginationOptions.page,t.pagination.on.paginationChanged(i,function(i,t){o.paginationOptions.page=i,r.page=i,o.paginationOptions.paginationPageSize=t,r.paginationPageSize=t,o.refresh()})))},o.getData=function(i){var t=s.grid&&s.grid.api,e=s.grid&&s.grid.options;if(i.predicate=o.originalPredicate,i.skip=(o.paginationOptions.page-1)*o.paginationOptions.paginationPageSize,i.take=o.paginationOptions.paginationPageSize,t&&e){var n=function(i){r(function(){void 0!==i&&void 0!==i.count&&(e.totalItems=i.count,t.grid.appScope[e.data]=i)})},a=function(){angular.noop()};f(s.grid,o.filterTermMappings,i,n,a)}},o.refresh=function(){c(),o.getData(o.currentQuery)},p(),u(),o.initializeGrid(),o.refresh()}}return i.$inject=["$compile","$timeout","$q","$odata","$odataresource","uiGridConstants"],i}();r.OdataUiGrid=t,i.Modules.main.directive("odataUiGrid",["$compile","$timeout","$q","$odata","$odataresource","uiGridConstants",function(i,r,e,n,a,o){return new t(i,r,e,n,a,o)}])}(r=i.Base||(i.Base={}))}(OdataUiGrid||(OdataUiGrid={}));var OdataUiGrid;!function(i){var r;!function(r){"use strict";var t=function(){function i(r,t,e){this.restrict="AE",this.scope=!1,this.compile=function(){return{pre:function(e,n,a){function o(){var r=!1;return e.col&&e.col.filters&&(r=e.col.filters.some(function(r){return-1!==i.customFiltersProvided.indexOf(r.type)})),r}angular.noop(a);var d=e.col.grid.options&&e.col.grid.options.useExternalFiltering&&o()?t.get("lib/directives/odataUiGridFilterView.html"):"<div ui-grid-filter></ui-grid-filter>";n.html(""),n.append(r(angular.element(d))(e))},post:function(i,r,t){angular.noop(r,t),i.col&&i.col.grid}}}}return i.customFiltersProvided=["date"],i.$inject=["$compile","$templateCache","uiGridConstants"],i}();r.OdataUiGridFilter=t,i.Modules.main.directive("odataUiGridFilter",["$compile","$templateCache","uiGridConstants",function(i,r,e){return new t(i,r,e)}])}(r=i.Base||(i.Base={}))}(OdataUiGrid||(OdataUiGrid={}));