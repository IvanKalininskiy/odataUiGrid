var OdataUiGrid;!function(i){"use strict";var t=function(){function i(){}return i.main=angular.module("odata.ui.grid",["ODataResources","ui.grid","ui.grid.pagination"]),i}();i.Modules=t,t.main.run(["$templateCache",function(i){var t=i.get("ui-grid/uiGridHeaderCell").toString();t=t.replace(/ui\-grid\-filter/gi,"odata-ui-grid-filter"),i.put("ui-grid/uiGridHeaderCell",t)}])}(OdataUiGrid||(OdataUiGrid={}));var OdataUiGrid;!function(i){var t;!function(t){"use strict";var e=function(){function i(i,t,e,r,n,a){var o=this;this.priority=-200,this.restrict="A",this.scope=!1,this.require="uiGrid",this.filterTermMappings={},this.paginationOptions={page:1,paginationPageSizes:[25,50,75],paginationPageSize:25,sort:""};var s=this;this.link=function(i,e,d,u){function c(){s.filterTermMappings[a.filter.STARTS_WITH]="startswith",s.filterTermMappings[a.filter.ENDS_WITH]="endswith",s.filterTermMappings[a.filter.EXACT]="eq",s.filterTermMappings[a.filter.CONTAINS]="contains",s.filterTermMappings[a.filter.GREATER_THAN]="gt",s.filterTermMappings[a.filter.GREATER_THAN_OR_EQUAL]="ge",s.filterTermMappings[a.filter.LESS_THAN]="lt",s.filterTermMappings[a.filter.LESS_THAN_OR_EQUAL]="le"}function l(i){if(!i||!i.resource)throw new Error("Need a valid odataUiGridQueryOptions object with a valid resource.");i.provider=i.resource.odata()}function p(i,t){i.sort=void 0,i.sortDirection=void 0,t.sort(function(i,t){return i.sort.priority===t.sort.priority?0:i.sort.priority>t.sort.priority?1:-1}).some(function(t,e){return i.provider=i.resource.odata(),i.sort=t.field,i.sortDirection=t.sort.direction,!0})}function f(i,t,e,n){if(-1!==["startswith","endswith"].indexOf(t))i.provider=i.provider.filter(new r.Func(t,new r.Property(e),new r.Value(n)),!0);else if("contains"===t)i.provider=i.provider.isv4?i.provider.filter(new r.Func("contains",new r.Property(e),new r.Value(n))):i.provider.filter(new r.Func("substringof",new r.Value(n),new r.Property(e)));else{n=isNaN(n)?n:parseInt(n,10);var a=new r.Predicate(e,t,n);i.predicate=i.predicate?i.predicate.and(a):a}}function g(i,t,e,r){var n=function(i){return void 0!==i.term&&null!==i.term&&""!==i.term.toString().trim()},a=i.gridApi.grid;a.options.columnDefs.filter(function(i){var t=!1;return a&&a.options&&a.options.enableFiltering&&(t=i&&i.filter&&n(i.filter)||i.filters&&i.filters.length&&i.filters.some(n)),t}).forEach(function(e){e.filters&&e.filters.forEach(function(r){void 0!==t[r.condition]&&n(r)&&f(i,t[r.condition],e.field,r.term)}),e.filter&&void 0!==t[e.filter.condition]&&n(e.filter)&&f(i,t[e.filter.condition],e.field,e.filter.term)});var o=i.provider;return i.predicate&&(o=o.filter(i.predicate)),i.select&&(o=o.select(i.select)),i.expand&&i.expand.length&&i.expand.forEach(function(i){o=o.expand(i)}),i.skip&&(o=o.skip(i.skip)),i.take&&(o=o.take(i.take)),i.sort&&(o=o.orderBy(i.sort,i.sortDirection)),i.provider=o,o.withInlineCount().query(e,r)}angular.noop(i,e,d,n),o.initializeGrid=function(){var t=i[d.odataUiGridQueryOptions],e=i[d.uiGrid];if(e){e.useExternalPagination=!0,e.useExternalFiltering=!0,e.useExternalSorting=!0;var r=e.onRegisterApi;e.onRegisterApi=function(n){r&&r(n),t.gridApi=n,n.core.on.sortChanged(i,function(i,e){angular.noop(i,e),p(t,e),o.refresh(t)}),n.core.on.filterChanged(i,function(){o.refresh(t)}),n.pagination&&(e.currentPage=e.currentPage||o.paginationOptions.page,e.paginationPageSize=o.paginationOptions.paginationPageSize,e.paginationPageSizes=o.paginationOptions.paginationPageSizes,n.pagination.on.paginationChanged(i,function(i,r){e.currentPage=i,e.paginationPageSize=r,o.refresh(t)})),o.refresh(t)}}},o.getData=function(i){var e=i.gridApi,r=e.grid.options;if(i.skip=(r.currentPage-1)*r.paginationPageSize,i.take=r.paginationPageSize,e&&r){var n=function(i){t(function(){void 0!==i&&void 0!==i.count&&(r.totalItems=i.count,e.grid.appScope[r.data]=i)})},a=function(){angular.noop()};g(i,o.filterTermMappings,n,a)}},o.refresh=function(i){l(i),o.getData(i)},c(),o.initializeGrid()}}return i.$inject=["$compile","$timeout","$q","$odata","$odataresource","uiGridConstants"],i}();t.OdataUiGrid=e,i.Modules.main.directive("odataUiGrid",["$compile","$timeout","$q","$odata","$odataresource","uiGridConstants",function(i,t,r,n,a,o){return new e(i,t,r,n,a,o)}])}(t=i.Base||(i.Base={}))}(OdataUiGrid||(OdataUiGrid={}));var OdataUiGrid;!function(i){var t;!function(t){"use strict";var e=function(){function i(t,e,r){this.restrict="AE",this.scope=!1,this.compile=function(){return{pre:function(r,n,a){function o(){var t=!1;return r.col&&r.col.filters&&(t=r.col.filters.some(function(t){return-1!==i.customFiltersProvided.indexOf(t.type)})),t}angular.noop(a);var s=r.col.grid.options&&r.col.grid.options.useExternalFiltering&&o()?e.get("lib/directives/odataUiGridFilterView.html"):"<div ui-grid-filter></ui-grid-filter>";n.html(""),n.append(t(angular.element(s))(r))},post:function(i,t,e){angular.noop(t,e),i.col&&i.col.grid}}}}return i.customFiltersProvided=["date"],i.$inject=["$compile","$templateCache","uiGridConstants"],i}();t.OdataUiGridFilter=e,i.Modules.main.directive("odataUiGridFilter",["$compile","$templateCache","uiGridConstants",function(i,t,r){return new e(i,t,r)}])}(t=i.Base||(i.Base={}))}(OdataUiGrid||(OdataUiGrid={}));